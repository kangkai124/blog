(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{167:function(t,s,n){"use strict";n.r(s);var e=n(0),a=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._m(1),n("p",[t._v("使用 vue-cli 生成前端框架：")]),t._m(2),t._m(3),t._m(4),n("p",[t._v("然后在项目根目录下创建 "),n("code",[t._v("server")]),t._v(" 文件夹，放服务端代码。这里有个"),n("a",{attrs:{href:"https://github.com/tencentyun/wafer2-quickstart-nodejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1),t._v(".")]),n("p",[t._v("结构如下：")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),n("p",[t._v("并修改 MySQL 相关的配置为本地的 MySQL 数据库。")]),t._m(10),n("p",[t._v("初始化数据库 - 打开 terminal 输入如下命令：")]),t._m(11),t._m(12),t._m(13),n("p",[t._v("当本地本地开发出一版时，可以部署到腾讯云的开发环境，这样就可以在线上访问该项目。")]),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),n("p",[t._v("然后在用户身份 ==> 成员管理中，添加项目成员，配置权限，这样好友也可以体验该小程序了。")]),n("p",[t._v("emmmmmm…...有什么遗漏的想起来再补吧:-)")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"mpvue-koa-搭建小程序全栈开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mpvue-koa-搭建小程序全栈开发环境","aria-hidden":"true"}},[this._v("#")]),this._v(" mpvue + koa 搭建小程序全栈开发环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-创建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建项目","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 创建项目")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 1. 全局安装 vue-cli")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g vue-cli\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 2. 基于 mpvue-quickstart 模板创建项目")]),t._v("\nvue init mpvue/mpvue-quickstart my-project\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 3. 安装依赖")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("cd")]),t._v(" my-project\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 4. 启动构建")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当然，也可以使用 "),s("code",[this._v("yarn")]),this._v(" 安装：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[this._v("yarn -g vue-cli\nvue init mpvue/mpvue-quickstart my-project\n"),s("span",{attrs:{class:"token function"}},[this._v("cd")]),this._v(" my-project\nyarn\nyarn dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v(".\n├── build                    # 与build相关的代码(mpvue内置)\n├── dist                     # mpvue编译后的代码\n├── server                   # koa服务端代码\n├── src                      # Application source code\n│   ├── components           # vue组件\n│   ├── pages                # 小程序页面\n│   ├── styles               # 公共样式\n│   ├── utils           \t # 工具函数\n│   ├── App.vue              # 根组件\n│   ├── config.js            # 配置文件\n│   ├── main.js              # 小程序主入口，export出小程序app.json配置\n└── static\t\t\t\t\t # 静态文件 \n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-搭建后台本地开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-搭建后台本地开发环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 搭建后台本地开发环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("提示：本地不能测试信道和客服相关接口")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("打开 "),s("code",[this._v("server/config.js")]),s("strong",[this._v("添加")]),this._v("以下配置：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("CONF")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 其他配置 ...")]),t._v("\n    serverHost"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'localhost'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tunnelServerUrl"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tunnelSignatureKey"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'27fb7d1c161b7ca52d73cce0f1d833f9f5b5ec89'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 腾讯云相关配置可以查看云 API 秘钥控制台：https://console.cloud.tencent.com/capi")]),t._v("\n    qcloudAppId"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'您的腾讯云 AppID'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    qcloudSecretId"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'您的腾讯云 SecretId'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    qcloudSecretKey"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'您的腾讯云 SecretKey'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    wxMessageToken"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'weixinmsgtoken'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    networkTimeout"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("30000")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("# 切换到服务端代码目录\ncd server\n\n# 安装依赖\nnpm install\n\n# 安装全局依赖\nnpm install -g nodemon\n\nnpm run dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("node tools/initdb.js\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("进入Mysql选中刚才创建的数据库，输入 "),s("code",[this._v("show tables;")]),this._v(" 可以看到初始化时创建了一个名叫 "),s("code",[this._v("cSessionInfo")]),this._v(" 的表。说明本地环境已经搭建成功。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3-部署到腾讯云开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署到腾讯云开发环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.  部署到腾讯云开发环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("首先修改项目根目录的 "),s("code",[this._v("project.config.json")]),this._v(" 文件，添加：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token string"}},[this._v('"qcloudRoot"')]),s("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" "),s("span",{attrs:{class:"token string"}},[this._v('"./server/"')]),s("span",{attrs:{class:"token punctuation"}},[this._v(",")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("然后将本地开发时添加到 "),s("code",[this._v("server/config.js")]),this._v(" 的配置删除，在 mysql.pass 那里填上自己的 APPID。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("接着进入小程序开发工具，点击右上角的 "),s("em",[this._v("腾讯云")]),this._v("，上传测试代码，弹出如图选项。第一次部署如下选择，之后再次上传选择 "),s("em",[this._v("智能上传")]),this._v(" 即可。部署成功会有提示。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://static.imkk.xin/blog/photo/uploadToTecentCloud.png",alt:"上传到腾讯云"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_4-把小程序设为体验版本并分享给好友"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-把小程序设为体验版本并分享给好友","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 把小程序设为体验版本并分享给好友")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在小程序开发工具右上角找到 "),s("em",[this._v("上传")]),this._v(" 选项，填写版本信息，上传后进入开发者控制台，开发管理页面，将该小程序设置为体验版本。")])}],!1,null,null,null);s.default=a.exports}}]);
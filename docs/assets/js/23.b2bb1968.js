(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{169:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._m(1),n("p",[t._v("自定义匹配规则，动态引入模块。")]),t._m(2),t._m(3),t._m(4),n("p",[t._v("上面 require.context 同样可以在运用在 vue 的自动导入子路由。\n（等我项目中配好了再来补充）🤓")]),t._m(5),n("p",[t._v("npm 脚本的原理非常简单。每当执行npm run，就会自动新建一个 Shell，在这个 Shell 里面执行指定的脚本命令。因此，只要是 Shell（一般是 Bash）可以运行的命令，就可以写在 npm 脚本里面。")]),t._m(6),n("p",[t._v("这意味着，当前目录的node_modules/.bin子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路径。比如，当前项目的依赖里面有 Mocha，只要直接写mocha test就可以了。")]),t._m(7),n("p",[t._v("由于 npm 脚本的唯一要求就是可以在 Shell 执行，因此它不一定是 Node 脚本，任何可执行文件都可以写在里面。")]),n("p",[t._v("npm 脚本的退出码，也遵守 Shell 脚本规则。如果退出码不是0，npm 就认为这个脚本执行失败。")]),t._m(8),n("p",[t._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序。")]),t._m(9),t._m(10),t._m(11),t._m(12),n("p",[t._v("这两个符号是 Bash 的功能。此外，还可以使用 node 的任务管理模块："),n("a",{attrs:{href:"https://github.com/paulpflug/script-runner",target:"_blank",rel:"noopener noreferrer"}},[t._v("script-runner"),n("OutboundLink")],1),t._v("、"),n("a",{attrs:{href:"https://github.com/mysticatea/npm-run-all",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm-run-all"),n("OutboundLink")],1),t._v("、"),n("a",{attrs:{href:"https://github.com/coderaiser/redrun",target:"_blank",rel:"noopener noreferrer"}},[t._v("redrun"),n("OutboundLink")],1),t._v("。")]),t._m(13),t._m(14),t._m(15),n("p",[t._v("npx 有两个主要作用：")]),t._m(16),n("p",[t._v("比如项目中安装了 eslint，初始化的时候需要")]),t._m(17),n("p",[t._v("使用 npx")]),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),n("p",[t._v("参考："),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/02/npx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npx 使用教程"),n("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"关于-webpack、npm-等。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于-webpack、npm-等。","aria-hidden":"true"}},[this._v("#")]),this._v(" 关于 webpack、npm 等。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"webpack-require-context"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-require-context","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack require.context")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 目录结构")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("|")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" index"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),n("span",{attrs:{class:"token operator"}},[t._v("|")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" components\n    "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" a"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n    "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),n("span",{attrs:{class:"token comment"}},[t._v("// a.js")]),t._v("\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hello"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'hello'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// b.js")]),t._v("\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    kk"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'kk'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentsContext "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" require"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("context")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'./components'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.js$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("componentsContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("keys")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// ["./a.js", "./b.js"]')]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("importAll")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// ƒ webpackContext(req) {}")]),t._v("\n    r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("keys")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("forEach")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// ./a.js    ./b.js")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("componentsContext")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("componentConfig"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// {hello: \"hello\"}  {kk: 'kk'}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token function"}},[t._v("importAll")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("componentsContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("在 vue 中的应用：在components目录下创建一个global目录，里面放置一些需要全局注册的组件。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// components/index.js")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 自动加载 global 目录下的 .js 结尾的文件")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentsContext "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" require"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("context")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'./global'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.js$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncomponentsContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("keys")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("forEach")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("componentsContext")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("/**\n  * 兼容 import export 和 require module.export 两种规范\n  */")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctrl "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" componentConfig"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" componentConfig\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("component")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctrl"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctrl"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm","aria-hidden":"true"}},[this._v("#")]),this._v(" npm")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("比较特别的是，npm run新建的这个 Shell，会将当前目录的node_modules/.bin子目录加入PATH变量，执行结束后，再将PATH变量恢复原样。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token string"}},[this._v('"test"')]),s("span",{attrs:{class:"token keyword"}},[this._v(":")]),this._v(" "),s("span",{attrs:{class:"token string"}},[this._v('"mocha test"')]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"npm-执行顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-执行顺序","aria-hidden":"true"}},[this._v("#")]),this._v(" npm 执行顺序")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果是并行执行（即同时的平行执行），可以使用 "),s("code",[this._v("&")]),this._v(" 符号。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ "),s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" run script1.js "),s("span",{attrs:{class:"token operator"}},[this._v("&")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" run script2.js\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果是继发执行（即只有前一个任务成功，才执行下一个任务），可以使用 "),s("code",[this._v("&&")]),this._v(" 符号。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ "),s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" run script1.js "),s("span",{attrs:{class:"token operator"}},[this._v("&&")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" run script2.js\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"npm-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" npm-scripts")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("prepublish: Run BEFORE the package is packed and published, as well as on local "),n("strong",[t._v("npm install")]),t._v("without any arguments. (See below)")]),n("li",[t._v("prepare: Run both BEFORE the package is packed and published, on local "),n("strong",[t._v("npm install")]),t._v(" without any arguments, and when installing git dependencies (See below). This is run AFTER "),n("strong",[t._v("prepublish")]),t._v(", but BEFORE "),n("strong",[t._v("prepublishOnly")]),t._v(".")]),n("li",[t._v("prepublishOnly: Run BEFORE the package is prepared and packed, ONLY on "),n("strong",[t._v("npm publish")]),t._v(". (See below.)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"npx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npx","aria-hidden":"true"}},[this._v("#")]),this._v(" npx")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"_1-调用项目安装的模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-调用项目安装的模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 调用项目安装的模块")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("./node_modules/.bin/eslint --init\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("npx eslint --init\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("npx 的原理是，运行的时候到 "),s("code",[this._v("node_modules/.bin")]),this._v(" 和环境变量 "),s("code",[this._v("@PATH")]),this._v(" 里面，检查命令是否存在。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"_2-避免全局安装模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-避免全局安装模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 避免全局安装模块")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("比如使用 "),s("code",[this._v("create-react-app")]),this._v(" 创建项目时，不需要全局安装这个模块，使用 npx")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("npx create-react-app my-react-app\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("npx 将 "),s("code",[this._v("create-react-app")]),this._v(" 下载到一个临时目录，使用以后再删除，下次使用还会重新下载。")])}],!1,null,null,null);s.default=e.exports}}]);
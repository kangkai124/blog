<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ€è€ƒ | KK | FE</title>
    <meta name="description" content="Code, Guitar, Photography, and Sports">
    <link rel="icon" href="/logo_small.jpg">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.4b10c28d.css" as="style"><link rel="preload" href="/assets/js/app.78b8ba49.js" as="script"><link rel="preload" href="/assets/js/18.612d4520.js" as="script"><link rel="prefetch" href="/assets/js/1.30b2587f.js"><link rel="prefetch" href="/assets/js/2.ca22baaf.js"><link rel="prefetch" href="/assets/js/3.174657bf.js"><link rel="prefetch" href="/assets/js/4.adf40659.js"><link rel="prefetch" href="/assets/js/5.df7f55d9.js"><link rel="prefetch" href="/assets/js/6.9be065d6.js"><link rel="prefetch" href="/assets/js/7.526ddef5.js"><link rel="prefetch" href="/assets/js/8.c1091489.js"><link rel="prefetch" href="/assets/js/9.19f5d287.js"><link rel="prefetch" href="/assets/js/10.62342e6f.js"><link rel="prefetch" href="/assets/js/11.34067726.js"><link rel="prefetch" href="/assets/js/12.404a2c78.js"><link rel="prefetch" href="/assets/js/13.26fcfe49.js"><link rel="prefetch" href="/assets/js/14.853db56f.js"><link rel="prefetch" href="/assets/js/15.a0676c31.js"><link rel="prefetch" href="/assets/js/16.d0a947f8.js"><link rel="prefetch" href="/assets/js/17.77d27c46.js"><link rel="prefetch" href="/assets/js/19.2b375517.js"><link rel="prefetch" href="/assets/js/20.78ba3417.js"><link rel="prefetch" href="/assets/js/21.8f333a4d.js"><link rel="prefetch" href="/assets/js/22.3d596f81.js"><link rel="prefetch" href="/assets/js/23.567394cc.js"><link rel="prefetch" href="/assets/js/24.86ac1b5d.js"><link rel="prefetch" href="/assets/js/25.3b9c0cd6.js"><link rel="prefetch" href="/assets/js/26.033688e9.js"><link rel="prefetch" href="/assets/js/27.bdb536ec.js"><link rel="prefetch" href="/assets/js/28.9c0a483e.js"><link rel="prefetch" href="/assets/js/29.f40ca1bf.js"><link rel="prefetch" href="/assets/js/30.d13bd8a5.js"><link rel="prefetch" href="/assets/js/31.9ba48c74.js"><link rel="prefetch" href="/assets/js/32.cbe3562e.js"><link rel="prefetch" href="/assets/js/33.b92e4609.js"><link rel="prefetch" href="/assets/js/34.50e0a4d1.js"><link rel="prefetch" href="/assets/js/35.c5742db4.js"><link rel="prefetch" href="/assets/js/36.4857bad9.js"><link rel="prefetch" href="/assets/js/37.33ba67b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b10c28d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      KK | FE
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ç¬”è®°</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/javaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----><a href="/html-css/" class="nav-link">html/css</a></li><li class="dropdown-item"><!----><a href="/react-vue/" class="nav-link">react/vue</a></li><li class="dropdown-item"><!----><a href="/nodeJs/" class="nav-link">nodeJs</a></li><li class="dropdown-item"><!----><a href="/build/" class="nav-link">build</a></li><li class="dropdown-item"><!----><a href="/thoughts/" class="nav-link">thoughts</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">è½¬è½½</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/share/k2data/" class="nav-link">K2data</a></li><li class="dropdown-item"><!----><a href="/share/fe/" class="nav-link router-link-active">åšå®¢</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">æ‘„å½±</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://kangkai.tuchong.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å›¾è™«
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----><a href="/photo/" class="nav-link">åŸåˆ›æ–‡ç« </a></li></ul></div></div><a href="https://github.com/kangkai124" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ç¬”è®°</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/javaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----><a href="/html-css/" class="nav-link">html/css</a></li><li class="dropdown-item"><!----><a href="/react-vue/" class="nav-link">react/vue</a></li><li class="dropdown-item"><!----><a href="/nodeJs/" class="nav-link">nodeJs</a></li><li class="dropdown-item"><!----><a href="/build/" class="nav-link">build</a></li><li class="dropdown-item"><!----><a href="/thoughts/" class="nav-link">thoughts</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">è½¬è½½</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/share/k2data/" class="nav-link">K2data</a></li><li class="dropdown-item"><!----><a href="/share/fe/" class="nav-link router-link-active">åšå®¢</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">æ‘„å½±</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://kangkai.tuchong.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å›¾è™«
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----><a href="/photo/" class="nav-link">åŸåˆ›æ–‡ç« </a></li></ul></div></div><a href="https://github.com/kangkai124" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>æ‚è°ˆ</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/share/fe/" class="sidebar-link">å—¨ï¼Œé€ä½ ä¸€å¼ Webæ€§èƒ½ä¼˜åŒ–åœ°å›¾</a></li><li><a href="/share/fe/functional-code.html" class="active sidebar-link">è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ€è€ƒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/share/fe/functional-code.html#é«˜é˜¶å‡½æ•°" class="sidebar-link">é«˜é˜¶å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/share/fe/functional-code.html#å‡½æ•°å¼ç¼–ç¨‹" class="sidebar-link">å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="sidebar-sub-header"><a href="/share/fe/functional-code.html#æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£" class="sidebar-link">æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£</a></li></ul></li><li><a href="/share/fe/sso-cas.html" class="sidebar-link">å‰ç«¯éœ€è¦äº†è§£çš„ SSO ä¸ CAS çŸ¥è¯†</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>å‰ç«¯æ¡†æ¶</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>css</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ€è€ƒ"><a href="#è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ€è€ƒ" aria-hidden="true" class="header-anchor">#</a> è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ€è€ƒ</h1><p>ä»Šå¤©åœ¨å…¬å¸å†…éƒ¨å¬æœˆå½±è®²<a href="https://ppt.baomitu.com/d/760c9ae7" target="_blank" rel="noopener noreferrer">ã€Šå¦‚ä½•å†™â€œå¥½â€ JavaScriptã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œå…¶ä¸­é‡ç‚¹æåˆ°äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¬å®Œä¹‹åå¾ˆæœ‰æ„Ÿæƒ³ï¼Œäºæ˜¯å†™ä¸€ç¯‡æ–‡ç« æ¥è°ˆè°ˆæˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£</p><p>å¯¹å‰é¢çš„ä¾‹å­ä¸æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥æ‹‰åˆ°æœ€åçœ‹ç»“è®ºã€‚</p><p>èŠå‡½æ•°å¼ç¼–ç¨‹å‰ï¼Œå…ˆçœ‹å‡ ä¸ªé«˜é˜¶å‡½æ•°çš„ä¾‹å­ï¼Œæœˆå½±çš„PPTä¸­ä¹Ÿæ˜¯ä»é«˜é˜¶å‡½æ•°è®²èµ·çš„</p><h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" aria-hidden="true" class="header-anchor">#</a> é«˜é˜¶å‡½æ•°</h2><h3 id="æ‰§è¡Œä¸€æ¬¡"><a href="#æ‰§è¡Œä¸€æ¬¡" aria-hidden="true" class="header-anchor">#</a> æ‰§è¡Œä¸€æ¬¡</h3><div class="language-js extra-class"><pre class="language-js"><code>block<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  block<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'hide'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ ·è¿™ä¸ª <code>block</code> çš„ç‚¹å‡»äº‹ä»¶åªèƒ½ç”Ÿæ•ˆä¸€æ¬¡ï¼Œæœ‰äº›åŒå­¦å¯èƒ½è¿˜ä¼šå†™å‡ºä¸‹é¢çš„ä»£ç å®ç°åŒæ ·çš„åŠŸèƒ½</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> clicked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>clicked <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    clicked <span class="token operator">=</span> <span class="token boolean">true</span>
    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'hide'</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æœˆå½±è¯´å†™å‡ºè¿™æ ·ä»£ç çš„åŒå­¦æ˜¯è¦è¢«å¼€é™¤çš„ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><p>ä½¿ç”¨é«˜é˜¶å‡½æ•°å®ç°ï¼š</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">once</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> ret <span class="token operator">=</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      fn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

block<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">once</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'hide'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/buzi/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘å¯ä»¥çœ‹demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>æŠŠ<strong>æ‰§è¡Œä¸€æ¬¡</strong>çš„åŠŸèƒ½æŠ½è±¡æˆä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>once</code>ï¼Œç„¶åæŠŠåŸå§‹åŠŸèƒ½å‡½æ•°ä¼ å…¥ <code>once</code> å¾—åˆ°ä¸€ä¸ªæ–°çš„åŠŸèƒ½å‡½æ•°ï¼Œæ–°çš„åŠŸèƒ½å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚</p><h3 id="èŠ‚æµ"><a href="#èŠ‚æµ" aria-hidden="true" class="header-anchor">#</a> èŠ‚æµ</h3><p>èŠ‚æµçš„æ„æ€æ˜¯ä¸ç®¡å‡½æ•°è°ƒç”¨çš„é€Ÿåº¦æœ‰å¤šå¿«ï¼Œå‡½æ•°æ‰§è¡Œæœ€å¤šnæ¯«ç§’æ‰§è¡Œä¸€æ¬¡ï¼ˆè°ƒç”¨ä¸€æ¬¡ånæ¯«ç§’å†…ä¸åœ¨æ‰§è¡Œï¼‰</p><p>ä¾‹å¦‚ç”¨é¼ æ ‡å¿«é€Ÿç‚¹å‡»æŒ‰é’®ï¼š</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>  args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  circle<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  circle<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'fade'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> circle<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/gale/1/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘å¯ä»¥çœ‹demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>å¯ä»¥çœ‹å‡º <strong>èŠ‚æµ</strong> å’Œ <strong>ç‚¹å‡»ä¸€æ¬¡</strong> æ˜¯åŒä¸€ä¸ªé€»è¾‘ï¼Œå°† <strong>èŠ‚æµ</strong> æŠ½è±¡æˆé«˜é˜¶å‡½æ•° <code>throttle</code>ï¼Œç„¶åæŠŠåŸå§‹åŠŸèƒ½å‡½æ•°ä¼ å…¥ <code>throttle</code> å¾—åˆ°ä¸€ä¸ªæ–°çš„åŠŸèƒ½å‡½æ•°ï¼Œæ–°çš„åŠŸèƒ½å‡½æ•°å…·æœ‰èŠ‚æµçš„åŠŸèƒ½ã€‚</p><h3 id="è¿å‡»"><a href="#è¿å‡»" aria-hidden="true" class="header-anchor">#</a> è¿å‡»</h3><p>è¿å‡»æ•ˆæœç±»ä¼¼ç›´æ’­é€ç¤¼ç‰©ä¸€ä¸ªç¤¼ç‰©é€äº†å¤šæ¬¡çš„é‚£ä¸ªæ•ˆæœï¼Œ<a href="https://code.h5jun.com/bucu/3/edit?js,output" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">consumer</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      timer<span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        tasks<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  count<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token string">`+</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>t<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  count<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'hit'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> r <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token number">7</span> <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">,</span>
      g <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token number">17</span> <span class="token operator">%</span> <span class="token number">128</span><span class="token punctuation">,</span>
      b <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token number">31</span> <span class="token operator">%</span> <span class="token number">128</span><span class="token punctuation">;</span>
  
  count<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token template-string"><span class="token string">`rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>g<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'hide'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>è¿å‡»</strong> å…¶å®ä¹Ÿæ˜¯åœ¨ <strong>èŠ‚æµ</strong> çš„åŸºç¡€ä¸ŠåŠ å·¥ä¸€ä¸‹</p><p>å¥½äº†é«˜é˜¶å‡½æ•°å…ˆè¯´åˆ°è¿™ï¼Œä»ä¸Šé¢ä¸‰ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œé«˜é˜¶å‡½æ•°å°±æ˜¯ä¸€ä¸ªå‡½æ•°returnäº†å¦ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æœˆå½±çš„è¯æ¥è¯´å°±æ˜¯ï¼š<strong>å®ƒä»¬è‡ªèº«è¾“å…¥å‡½æ•°æˆ–è¿”å›å‡½æ•°ï¼Œè¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°</strong></p><h2 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" aria-hidden="true" class="header-anchor">#</a> å‡½æ•°å¼ç¼–ç¨‹</h2><p>çœ‹å®Œäº†é«˜é˜¶å‡½æ•°çš„å‡ ä¸ªä¾‹å­åï¼Œåœ¨çœ‹å‡ ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„ä¾‹å­ï¼š</p><h3 id="toggle"><a href="#toggle" aria-hidden="true" class="header-anchor">#</a> Toggle</h3><div class="language-js extra-class"><pre class="language-js"><code>switcher<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'on'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'off'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'on'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://code.h5jun.com/tuda/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>ä½¿ç”¨å‡½æ•°å¼å®ç°ï¼š</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">toggle</span> <span class="token punctuation">(</span><span class="token operator">...</span>actions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> action <span class="token operator">=</span> actions<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> action<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

switcher<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">toggle</span><span class="token punctuation">(</span>
  evt <span class="token operator">=&gt;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
  evt <span class="token operator">=&gt;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'on'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/nal/3/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>ç”¨å‡½æ•°å¼å®ç°åæ‰©å±•æ€§å¼ºäº†å¾ˆå¤šï¼Œæ¯”å¦‚è¯´ä¸‰æ€ï¼š</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">toggle</span> <span class="token punctuation">(</span><span class="token operator">...</span>actions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> action <span class="token operator">=</span> actions<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> action<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

switcher<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">toggle</span><span class="token punctuation">(</span>
  evt <span class="token operator">=&gt;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'warn'</span><span class="token punctuation">,</span>
  evt <span class="token operator">=&gt;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
  evt <span class="token operator">=&gt;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'on'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/foqo/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>ä½¿ç”¨å‡½æ•°å¼æ–¹å¼å®ç°å¯ä»¥å®ç°Nå¤šæ€ï¼Œè€Œä¸éœ€è¦æ”¹åŠ¨ä»£ç ï¼ŒæŠ½è±¡çš„å¾ˆå®Œç¾</p><h3 id="æ‰¹é‡æ“ä½œ"><a href="#æ‰¹é‡æ“ä½œ" aria-hidden="true" class="header-anchor">#</a> æ‰¹é‡æ“ä½œ</h3><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">batch</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setColor</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setFontSize</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

setColor <span class="token operator">=</span> <span class="token function">batch</span><span class="token punctuation">(</span>setColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
setFontSize <span class="token operator">=</span> <span class="token function">batch</span><span class="token punctuation">(</span>setFontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> items1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(2n + 1)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> items2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(3n + 1)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setColor</span><span class="token punctuation">(</span>items1<span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setColor</span><span class="token punctuation">(</span>items2<span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setFontSize</span><span class="token punctuation">(</span>items2<span class="token punctuation">,</span> <span class="token string">'22px'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/naco/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>è¿™ä¸ªä¾‹å­æœ‰ä¸¤ä¸ªåŠŸèƒ½å•ä¸€çš„å‡½æ•° <code>setColor</code> å’Œ <code>setFontSize</code>ï¼Œç„¶åå†™äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>batch</code>ï¼Œå°†åŸå§‹åŠŸèƒ½å‡½æ•°ä¼ å…¥é«˜é˜¶å‡½æ•° <code>batch</code> é‡Œï¼Œç„¶åè¿”å›ä¸€ä¸ªå‡½æ•°å¯ä»¥æ”¯æŒæ‰¹é‡æ“ä½œçš„åŠŸèƒ½</p><p>åŸºäºè¿™ä¸ªä¾‹å­åœ¨åŠ å·¥ä¸€ä¸‹ï¼š</p><h3 id="å¯æŸ¥è¯¢"><a href="#å¯æŸ¥è¯¢" aria-hidden="true" class="header-anchor">#</a> å¯æŸ¥è¯¢</h3><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">batch</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">queriable</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      selector <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setColor</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setFontSize</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

setColor <span class="token operator">=</span> <span class="token function">queriable</span><span class="token punctuation">(</span><span class="token function">batch</span><span class="token punctuation">(</span>setColor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
setFontSize <span class="token operator">=</span> <span class="token function">queriable</span><span class="token punctuation">(</span><span class="token function">batch</span><span class="token punctuation">(</span>setFontSize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(2n + 1)'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(3n + 1)'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setFontSize</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(3n + 1)'</span><span class="token punctuation">,</span> <span class="token string">'22px'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/luc/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>è¿™ä¸ªä¾‹å­æ–°å¢äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>queriable</code>ï¼Œå®ç°äº†æŸ¥è¯¢åŠŸèƒ½ã€‚å°† <code>batch</code> ä¼ å…¥ <code>queriable</code> åç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•°æ”¯æŒæŸ¥è¯¢åŠŸèƒ½ã€‚</p><p>åœ¨åŠ å·¥ä¸€ä¸‹ï¼š</p><h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" aria-hidden="true" class="header-anchor">#</a> æ‰“åŒ…</h3><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">batch</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">queriable</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      selector <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pack</span> <span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> el<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setColor</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setFontSize</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> css <span class="token operator">=</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> setColor<span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> setFontSize<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
css <span class="token operator">=</span> <span class="token function">queriable</span><span class="token punctuation">(</span><span class="token function">batch</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(2n + 1)'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(3n + 1)'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">'22px'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://code.h5jun.com/gelo/2/edit?js,output" target="_blank" rel="noopener noreferrer">ç‚¹æˆ‘æŸ¥çœ‹DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>è¿™ä¸ªä¾‹å­åˆæ–°å¢äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>pack</code>ï¼Œå°†åŠŸèƒ½å•ä¸€çš„å‡½æ•°é€šè¿‡å¯¹è±¡çš„æ–¹å¼ä¼ å…¥åˆ° <code>pack</code> åç”Ÿæˆäº†æ–°å‡½æ•°ï¼Œæ–°å‡½æ•°å¯ä»¥æ¥å—å¯¹è±¡ç±»å‹çš„å€¼æ¥è®¾ç½®é¢œè‰²å’Œå­—ä½“å¤§å°ã€‚</p><p>æœ€ååœ¨åŠ å·¥ä¸€ä¸‹ï¼š</p><h3 id="é“¾å¼è°ƒç”¨"><a href="#é“¾å¼è°ƒç”¨" aria-hidden="true" class="header-anchor">#</a> é“¾å¼è°ƒç”¨</h3><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">batch</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">queriable</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      selector <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>selector<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pack</span> <span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> el<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">methodize</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prop <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setColor</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setFontSize</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setText</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> css <span class="token operator">=</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> setColor<span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> setFontSize<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
css <span class="token operator">=</span> <span class="token function">queriable</span><span class="token punctuation">(</span><span class="token function">batch</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token function">queriable</span><span class="token punctuation">(</span><span class="token function">batch</span><span class="token punctuation">(</span>setText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token constant">E</span> <span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_selector <span class="token operator">=</span> selector<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token constant">E</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>css <span class="token operator">=</span> <span class="token function">methodize</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> <span class="token string">'_selector'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">E</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token function">methodize</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token string">'_selector'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(2n + 1)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul &gt; li:nth-child(3n + 1)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">'22px'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ä¸ªä¾‹å­æ–°å¢äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>methodize</code>ï¼Œå‡½æ•°ä¸­çš„ <code>return this</code> å¾ˆå…³é”®ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯ä½¿ç”¨ <code>return this</code>ï¼Œæ¥å®ç°é“¾å¼è°ƒç”¨ã€‚</p><h2 id="æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£"><a href="#æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£" aria-hidden="true" class="header-anchor">#</a> æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£</h2><p>å‰é¢å†™äº†é‚£ä¹ˆå¤šä¾‹å­ï¼Œçœ‹èµ·æ¥å¤æ‚ï¼Œä½†å…¶å®æˆ‘åè€Œè§‰å¾—å¾ˆç®€å•ï¼Œå› ä¸ºåœ¨æˆ‘çš„çœ¼é‡Œï¼Œå‡½æ•°å¼ç¼–ç¨‹å…¶å®å°±æ˜¯æ— æ•°ä¸ªé«˜é˜¶å‡½æ•°ç»„è£…åœ¨ä¸€èµ·å®Œæˆä¸€ä¸ªå¾ˆå¤æ‚çš„åŠŸèƒ½ã€‚</p><p>è€Œè¿™äº›é«˜é˜¶å‡½æ•°æˆ‘æŠŠå®ƒç†è§£æˆä¸‹é¢è¿™å¼ å›¾çš„æ ·å­ï¼š</p><p><a href="https://camo.githubusercontent.com/ce15319154a510ee50f5b69a8c15a7b1f3c2197f/687474703a2f2f70312e7168696d672e636f6d2f743031653463306565303937636664333664362e706e67" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/ce15319154a510ee50f5b69a8c15a7b1f3c2197f/687474703a2f2f70312e7168696d672e636f6d2f743031653463306565303937636664333664362e706e67" alt="å‡½æ•°å¼ç¼–ç¨‹"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>ä½ ä¼šå‘ç°ï¼Œå½“æ»šçƒå…½ä¸€æ­¥ä¸€æ­¥è¿›åŒ–åˆ°æˆ˜æ–—æš´é¾™å…½ä¹‹åï¼Œå®ƒå·²ç»å…·å¤‡äº† <code>pack</code>ï¼Œ<code>batch</code>ï¼Œ<code>queriable</code>ï¼Œ<code>methodize</code> è¿™äº›é«˜é˜¶å‡½æ•°æ‰€æä¾›çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p><p>æ‰€ä»¥ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯ä»¥æŠŠ <code>pack</code>ï¼Œ<code>batch</code>ï¼Œ<code>queriable</code>ï¼Œ<code>methodize</code> ç†è§£æˆç±»ä¼¼äºä¸­é—´ä»¶ã€æ’ä»¶ï¼Œæˆ–è€… webpackä¸­çš„loaderï¼ˆwebpack ä¸­çš„loaderä¹Ÿæ˜¯å‰ä¸€ä¸ªloaderçš„å¤„ç†ç»“æœä¸¢ç»™ä¸‹ä¸ªloaderç»§ç»­å¤„ç†ï¼‰ï¼Œä¾‹å¦‚æˆ‘æ‰‹é‡Œæ‹¿ç€ä¸€ä¸ªæœ€åŸå§‹çš„åŠŸèƒ½å‡½æ•°ï¼Œæ¯”å¦‚ <code>setColor</code>ï¼Œå…ˆä¸¢ç»™packå¤„ç†ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•°ï¼Œç„¶åæŠŠå¤„ç†åçš„æ–°å‡½æ•°åœ¨ä¸¢ç»™ <code>batch</code> ä»¥æ­¤ç±»æ¨</p><p><strong>ç®€å•è¯´å°±æ˜¯ä¸Šä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„è¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„è¾“å…¥ï¼Œè€Œè¿™ä¸ªè¾“å‡ºå’Œè¾“å…¥ä¸ä»…ä»…æ˜¯æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°</strong></p><p>æ‰€ä»¥å‡½æ•°å¼ç¼–ç¨‹ï¼ŒæŠ½è±¡çš„è¿‡ç¨‹å¾ˆé‡è¦ï¼Œä¾‹å¦‚å“ªäº›é€»è¾‘æ˜¯éœ€è¦æŠ½è±¡æˆé«˜é˜¶å‡½æ•°çš„ã€‚è¿˜æœ‰å°±æ˜¯ç©å‚æ•°ï¼Œå¦‚æœåœ¨è‡ªå·±çš„ä¸šåŠ¡å½“ä¸­ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„è¯ï¼Œæˆ‘è§‰å¾—ä¿è¯ä¸Šä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä¸¢åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œæ˜¯ä¸€ä¸ªéœ€è¦æ³¨æ„çš„äº‹ã€‚</p><p>ç†è§£äº†æˆ‘è¯´çš„å†…å®¹ï¼Œåœ¨å›åˆ°æ–‡ç« çš„å¼€å¤´æŠŠè¿™äº›ä¾‹å­é‡æ–°çœ‹ä¸€éï¼Œä½ ä¼šå‘ç°å¥½åƒä¸–ç•Œéƒ½ä¸ä¸€æ ·äº†ã€‚</p><p>æˆ‘å¯¹å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿä¸æ˜¯ç‰¹åˆ«çš„ç²¾ï¼Œç›®å‰è¿˜åœ¨ç ”ç©¶é˜¶æ®µï¼Œï¼Œï¼Œï¼Œï¼Œ</p><p><em>å£°æ˜ï¼šå¦‚æœæ‚¨è§‰å¾—æˆ‘ç†è§£çš„ä¸å¯¹ï¼Œè¯·å¤§ä½¬æŒ‡ç‚¹~</em></p></div><div class="page-nav"><p class="inner"><span class="prev">
        â† <a href="/share/fe/" class="prev router-link-active">
          å—¨ï¼Œé€ä½ ä¸€å¼ Webæ€§èƒ½ä¼˜åŒ–åœ°å›¾
        </a></span><span class="next"><a href="/share/fe/sso-cas.html">
          å‰ç«¯éœ€è¦äº†è§£çš„ SSO ä¸ CAS çŸ¥è¯†
        </a> â†’
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/assets/js/18.612d4520.js" defer></script><script src="/assets/js/app.78b8ba49.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端需要了解的 SSO 与 CAS 知识 | KK | FE</title>
    <meta name="description" content="Code, Guitar, Photography, and Sports">
    <link rel="icon" href="/blog/logo_small.jpg">
  <link rel="manifest" href="/blog/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/blog/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4ede6d37.css" as="style"><link rel="preload" href="/blog/assets/js/app.6e37a5ef.js" as="script"><link rel="preload" href="/blog/assets/js/15.2d65167c.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.386995d3.js"><link rel="prefetch" href="/blog/assets/js/2.b38c3407.js"><link rel="prefetch" href="/blog/assets/js/3.397767ee.js"><link rel="prefetch" href="/blog/assets/js/4.b18a8b89.js"><link rel="prefetch" href="/blog/assets/js/5.7143e638.js"><link rel="prefetch" href="/blog/assets/js/6.4f428a13.js"><link rel="prefetch" href="/blog/assets/js/7.8d835414.js"><link rel="prefetch" href="/blog/assets/js/8.ab1e0923.js"><link rel="prefetch" href="/blog/assets/js/9.4ef4ebad.js"><link rel="prefetch" href="/blog/assets/js/10.76bc5a65.js"><link rel="prefetch" href="/blog/assets/js/11.b497f71b.js"><link rel="prefetch" href="/blog/assets/js/12.7b18ec25.js"><link rel="prefetch" href="/blog/assets/js/13.c58e8f72.js"><link rel="prefetch" href="/blog/assets/js/14.78262487.js"><link rel="prefetch" href="/blog/assets/js/16.e9c358df.js"><link rel="prefetch" href="/blog/assets/js/17.f6ffb2bd.js"><link rel="prefetch" href="/blog/assets/js/18.fd6cd8a6.js"><link rel="prefetch" href="/blog/assets/js/19.3b3d3954.js"><link rel="prefetch" href="/blog/assets/js/20.ed666d26.js"><link rel="prefetch" href="/blog/assets/js/21.0f64a4fb.js"><link rel="prefetch" href="/blog/assets/js/22.e7d9a6e5.js"><link rel="prefetch" href="/blog/assets/js/23.b2bb1968.js"><link rel="prefetch" href="/blog/assets/js/24.8538f7c5.js"><link rel="prefetch" href="/blog/assets/js/25.7867d921.js"><link rel="prefetch" href="/blog/assets/js/26.6a8b9a00.js"><link rel="prefetch" href="/blog/assets/js/27.353fb326.js"><link rel="prefetch" href="/blog/assets/js/28.98451dea.js"><link rel="prefetch" href="/blog/assets/js/29.20c4eb02.js"><link rel="prefetch" href="/blog/assets/js/30.3f86de51.js"><link rel="prefetch" href="/blog/assets/js/31.61f0ee12.js"><link rel="prefetch" href="/blog/assets/js/32.71641e4f.js"><link rel="prefetch" href="/blog/assets/js/33.e7333a16.js"><link rel="prefetch" href="/blog/assets/js/34.194b66d6.js"><link rel="prefetch" href="/blog/assets/js/35.4a197c72.js"><link rel="prefetch" href="/blog/assets/js/36.54e331ba.js"><link rel="prefetch" href="/blog/assets/js/37.a8a28720.js"><link rel="prefetch" href="/blog/assets/js/38.4ccbe1a2.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4ede6d37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/blog/" class="home-link router-link-active"><!----><span class="site-name">
      KK | FE
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">大前端</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/blog/fe/javaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----><a href="/blog/fe/html-css/" class="nav-link">html/css</a></li><li class="dropdown-item"><!----><a href="/blog/fe/react-vue/" class="nav-link">react/vue</a></li><li class="dropdown-item"><!----><a href="/blog/fe/project/" class="nav-link">工程化</a></li><li class="dropdown-item"><!----><a href="/blog/fe/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----><a href="/blog/fe/web/" class="nav-link router-link-exact-active router-link-active">浏览器</a></li><li class="dropdown-item"><!----><a href="/blog/fe/interview/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程基础</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/blog/foundation/computer/" class="nav-link">计算机原理</a></li><li class="dropdown-item"><!----><a href="/blog/foundation/data-structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">摄影</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://kangkai.tuchong.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----><a href="/blog/photo/" class="nav-link">原创文章</a></li></ul></div></div><a href="https://github.com/kangkai124" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">大前端</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/blog/fe/javaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----><a href="/blog/fe/html-css/" class="nav-link">html/css</a></li><li class="dropdown-item"><!----><a href="/blog/fe/react-vue/" class="nav-link">react/vue</a></li><li class="dropdown-item"><!----><a href="/blog/fe/project/" class="nav-link">工程化</a></li><li class="dropdown-item"><!----><a href="/blog/fe/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----><a href="/blog/fe/web/" class="nav-link router-link-exact-active router-link-active">浏览器</a></li><li class="dropdown-item"><!----><a href="/blog/fe/interview/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程基础</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/blog/foundation/computer/" class="nav-link">计算机原理</a></li><li class="dropdown-item"><!----><a href="/blog/foundation/data-structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">摄影</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://kangkai.tuchong.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----><a href="/blog/photo/" class="nav-link">原创文章</a></li></ul></div></div><a href="https://github.com/kangkai124" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>浏览器</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/blog/fe/web/" class="active sidebar-link">前端需要了解的 SSO 与 CAS 知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/fe/web/#前置知识" class="sidebar-link">前置知识</a></li><li class="sidebar-sub-header"><a href="/blog/fe/web/#什么是-sso-与-cas" class="sidebar-link">什么是 SSO 与 CAS?</a></li><li class="sidebar-sub-header"><a href="/blog/fe/web/#sso-的演进与分类" class="sidebar-link">SSO 的演进与分类</a></li><li class="sidebar-sub-header"><a href="/blog/fe/web/#详解cas" class="sidebar-link">详解CAS</a></li><li class="sidebar-sub-header"><a href="/blog/fe/web/#详细步骤" class="sidebar-link">详细步骤</a></li><li class="sidebar-sub-header"><a href="/blog/fe/web/#参考阅读：" class="sidebar-link">参考阅读：</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="前端需要了解的-sso-与-cas-知识"><a href="#前端需要了解的-sso-与-cas-知识" aria-hidden="true" class="header-anchor">#</a> 前端需要了解的 SSO 与 CAS 知识</h1><p>不管是什么公司，只要产品数量大于一个，那么单点登录势必是绕不过去的一个问题。作为前端程序员，我们对其虽然接触不多，但适当的了解还是必要的。本文就来谈谈单点登录相关的问题。</p><h2 id="前置知识"><a href="#前置知识" aria-hidden="true" class="header-anchor">#</a> 前置知识</h2><p>了解 SSO，最好具备以下知识。当然，如果不是特别熟，也不影响阅读。</p><ul><li>cookie及session</li><li>浏览器同源策略及跨域</li><li>了解登录系统的构成</li></ul><h2 id="什么是-sso-与-cas"><a href="#什么是-sso-与-cas" aria-hidden="true" class="header-anchor">#</a> 什么是 SSO 与 CAS?</h2><h3 id="sso"><a href="#sso" aria-hidden="true" class="header-anchor">#</a> SSO</h3><p>SSO 是英文 Single Sign On 的缩写，翻译过来就是单点登录。顾名思义，它把两个及以上个产品中的用户登录逻辑抽离出来，达到只输入一次用户名密码，就能同时登录多个产品的效果。</p><p>打个比方，SSO 和我们去迪士尼玩时购买的通票很像。<img src="https://user-gold-cdn.xitu.io/2017/11/6/722924230df383cce6c9ec3ab8b1be48?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>我们只要买一次通票，就可以玩所有游乐场内的设施，而不需要在过山车或者摩天轮那里重新买一次票。在这里，买票就相当于登录认证，游乐场就相当于使用一套 SSO 的公司，各种游乐设施就相当于公司的各个产品。</p><p><img src="https://user-gold-cdn.xitu.io/2017/11/6/722924230df383cce6c9ec3ab8b1be48?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>使用 SSO 的优点很明显：</p><ul><li><p>提升用户体验。</p></li><li><p>避免重复开发</p></li><li><p>提升安全系数</p></li></ul><p>假如你是我厂运维，发现了一个安全隐患需要紧急修复。你肯定无法忍受给茫茫多的产品后端都发一封邮件，责令修复吧？万一漏了一个呢？</p><p>综合看来，SSO 不仅是<strong>有用</strong>的，而且是<strong>必要</strong>的。</p><h3 id="cas"><a href="#cas" aria-hidden="true" class="header-anchor">#</a> CAS</h3><p>SSO 仅仅是一种架构，一种设计，而 CAS 则是实现 SSO 的一种手段。两者是抽象与具体的关系。当然，除了 CAS 之外，实现 SSO 还有其他手段，比如简单的 cookie。</p><p>CAS （Central Authentication Service）中心授权服务，本身是一个开源协议，分为 1.0 版本和 2.0 版本。1.0 称为基础模式，2.0称为代理模式，适用于存在非 Web 应用之间的单点登录。本文只涉及 CAS 1.0，下文中将详细介绍。</p><h2 id="sso-的演进与分类"><a href="#sso-的演进与分类" aria-hidden="true" class="header-anchor">#</a> SSO 的演进与分类</h2><p>下面详述一下各种场景下的 SSO，它们之间是逐步升级，逐步复杂化的关系。</p><h3 id="_1-同域-sso"><a href="#_1-同域-sso" aria-hidden="true" class="header-anchor">#</a> 1.同域 SSO</h3><p>如图，同域 SSO 是最简单的一种情况。</p><p>此时，两个产品都是在一个域名下，单点登录是很自然的选择。我们来捋一捋步骤，搞清楚这里的步骤是理解后文的基础，千万不要跳过。</p><ol><li>用户访问产品 a，向 后台服务器发送登录请求。</li><li>登录认证成功，服务器把用户的登录信息写入 session。</li><li>服务器为该用户生成一个 cookie，并加入到 response header 中，随着请求返回而写入浏览器。该 cookie 的域设定为 dxy.cn。</li><li>下一次，当用户访问同域名的产品 b 时，由于 a 和 b 在同一域名下，也是 dxy.cn，浏览器会自动带上之前的 cookie。此时后台服务器就可以通过该 cookie 来验证登录状态了。</li></ol><p>实际上，这种场景就是最简单最传统的登录操作。虽然我们把产品 a 和 b 人为分开了，但由于它们在同域上，就算看成是同一产品的不同类目也未尝不可。我们没有设置独立的 SSO 服务器，因为业务后台服务器本身就足以承担 SSO 的职能。</p><p><img src="https://user-gold-cdn.xitu.io/2017/11/7/d5c406051e343391aa970e8960229356?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><h3 id="_2-同父域-sso"><a href="#_2-同父域-sso" aria-hidden="true" class="header-anchor">#</a> 2.同父域 SSO</h3><p>同父域 SSO 是同域 SSO 的简单升级，唯一的不同在于，服务器在返回 cookie 的时候，要把cookie 的 domain 设置为其父域。</p><p>比如两个产品的地址分别为 a.dxy.cn 和 b.dxy.cn，那么 cookie 的域设置为 dxy.cn 即可。在访问 a 和 b 时，这个 cookie 都能发送到服务器，本质上和同域 SSO 没有区别。</p><h3 id="_3-跨域-sso"><a href="#_3-跨域-sso" aria-hidden="true" class="header-anchor">#</a> 3.跨域 SSO</h3><p>可以看到，在上面两种情况下，我们都没有专门设置 SSO 服务器。但是当两个产品不同域时，cookie 无法共享，所以我们必须设置独立的 SSO 服务器了。这个时候，我们就是通过标准的 CAS 方案来实现 SSO 的。下面我们就来详细介绍一下：</p><h2 id="详解cas"><a href="#详解cas" aria-hidden="true" class="header-anchor">#</a> 详解CAS</h2><p>CAS 1.0 协议定义了一组术语，一组票据，一组接口。</p><h3 id="术语："><a href="#术语：" aria-hidden="true" class="header-anchor">#</a> 术语：</h3><ul><li>Client：用户。</li><li>Server：中心服务器，也是 SSO 中负责单点登录的服务器。</li><li>Service：需要使用单点登录的各个服务，相当于上文中的产品 a/b。</li></ul><h3 id="接口："><a href="#接口：" aria-hidden="true" class="header-anchor">#</a> 接口：</h3><ul><li>/login：登录接口，用于登录到中心服务器。</li><li>/logout：登出接口，用于从中心服务器登出。</li><li>/validate：用于验证用户是否登录中心服务器。</li><li>/serviceValidate：用于让各个 service 验证用户是否登录中心服务器。</li></ul><h3 id="票据"><a href="#票据" aria-hidden="true" class="header-anchor">#</a> 票据</h3><ul><li>TGT：Ticket Grangting Ticket</li></ul><p>TGT 是 CAS 为用户签发的登录票据，拥有了 TGT，用户就可以证明自己在 CAS 成功登录过。TGT 封装了 Cookie 值以及此 Cookie 值对应的用户信息。当 HTTP 请求到来时，CAS 以此 Cookie 值（TGC）为 key 查询缓存中有无 TGT ，如果有的话，则相信用户已登录过。</p><ul><li><p>TGC：Ticket Granting Cookie</p></li><li><p>ST：Service Ticket</p></li></ul><p>票据之间的关系如下图。注意，PGTIOU, PGT, PT 是 CAS 2.0 中的内容，感兴趣的同学可以自行了解。</p><p><img src="https://user-gold-cdn.xitu.io/2017/11/7/2d8ebfb254dd30f0eeb92e811f5d0163?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><h2 id="详细步骤"><a href="#详细步骤" aria-hidden="true" class="header-anchor">#</a> 详细步骤</h2><p>看到这里，是不是又有点晕了？没关系，下面我们借助一个简单的场景，再来仔细捋一捋用 CAS 实现 SSO 的详细步骤，顺便加深理解之前提出的概念。</p><p>开始！</p><ol><li><p>用户访问产品 a，域名是 www.a.cn。</p></li><li><p>由于用户没有携带在 a 服务器上登录的 a cookie，所以 a 服务器返回 http 重定向，重定向的 url 是 SSO 服务器的地址，同时 url 的 query 中通过参数指明登录成功后，回跳到 a 页面。重定向的url 形如 sso.dxy.cn/login?service=https%3A%2F%2Fwww.a.cn。</p></li><li><p>由于用户没有携带在 SSO 服务器上登录的 <strong>TGC</strong>（看上面，票据之一），所以 SSO 服务器判断用户未登录，给用户显示统一登录界面。用户在 SSO 的页面上进行登录操作。</p></li><li><p>登录成功后，SSO 服务器构建用户在 SSO 登录的 <strong>TGT</strong>（又一个票据），同时返回一个 http 重定向。这里注意：</p></li><li><ul><li>重定向地址为之前写在 query 里的 a 页面。</li><li>重定向地址的 query 中包含 sso 服务器派发的 <strong>ST</strong>。</li><li>重定向的 http response 中包含写 cookie 的 header。这个 cookie 代表用户在 SSO 中的登录状态，它的值就是 <strong>TGC</strong>。</li></ul></li><li><p>浏览器重定向到产品 a。此时重定向的 url 中携带着 SSO 服务器生成的 <strong>ST</strong>。</p></li><li><p>根据 <strong>ST</strong>，a 服务器向 SSO 服务器发送请求，SSO 服务器验证票据的有效性。验证成功后，a 服务器知道用户已经在 sso 登录了，于是 a 服务器构建用户登录 session，记为 a session。并将 cookie 写入浏览器。注意，此处的 cookie 和 session 保存的是用户在 a 服务器的登录状态，和 CAS 无关。</p></li><li><p>之后用户访问产品 b，域名是 www.b.cn。</p></li><li><p>由于用户没有携带在 b 服务器上登录的 b cookie，所以 b 服务器返回 http 重定向，重定向的 url 是 SSO 服务器的地址，去询问用户在 SSO 中的登录状态。</p></li></ol><p>​</p><ol start="10"><li><p>浏览器重定向到 SSO。注意，第 4 步中已经向浏览器写入了携带 <strong>TGC</strong> 的cookie，所以此时 SSO 服务器可以拿到，根据 <strong>TGC</strong> 去查找 <strong>TGT</strong>，如果找到，就判断用户已经在 sso 登录过了。</p></li><li><p>SSO 服务器返回一个重定向，重定向携带 <strong>ST</strong>。注意，这里的 ST 和第4步中的 ST 是不一样的，事实上，每次生成的 ST 都是不一样的。</p></li><li><p>浏览器带 <strong>ST</strong> 重定向到 b 服务器，和第 5 步一样。</p></li><li><p>b 服务器根据票据向 SSO 服务器发送请求，票据验证通过后，b 服务器知道用户已经在 sso 登录了，于是生成 b session，向浏览器写入 b cookie。</p></li></ol><p><img src="https://user-gold-cdn.xitu.io/2017/11/7/0e2c2be35de3cf42744bae6f1238d6e7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>如图所示，至此，整个登录流程结束。之后当用户访问 a 或者 b 后，直接会携带 a cookie/b cookie，就不用再向 SSO 确认了。</p><p>实际开发时，可以根据 CAS 增加更多的判断逻辑，比如，在收到CAS Server签发的ST后，如果 ST 被 hacker 窃取，并且 client 本身没来得及去验证 ST，被 hacker 抢先一步验证 ST，怎么解决。此时就可以在申请 ST 时添加额外验证因子（如ip、sessionId等）。</p><h2 id="参考阅读："><a href="#参考阅读：" aria-hidden="true" class="header-anchor">#</a> 参考阅读：</h2><ul><li><a href="https://link.juejin.im/?target=https%3A%2F%2Fapereo.github.io%2Fcas%2F4.2.x%2Findex.html" target="_blank" rel="noopener noreferrer">CAS官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><blockquote><p>原文：<a href="https://juejin.im/post/5a002b536fb9a045132a1727" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5a002b536fb9a045132a1727<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div><!----><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/blog/assets/js/15.2d65167c.js" defer></script><script src="/blog/assets/js/app.6e37a5ef.js" defer></script>
  </body>
</html>
